<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seu Modelo de Machine Learning</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.9.0"></script>
</head>
<body>
    <h1>Reconhecimento - Seu Modelo</h1>
    <button type="button" onclick="init()">Iniciar</button>
    <div id="webcam-container"></div>
    <div id="label-container"></div>

    <script type="text/javascript">
        // Caminho para o JSON do modelo e os pesos na mesma pasta do repositório no GitHub Pages
        const modelURL = './js.model/model.json';

        let model, webcam, labelContainer;

        async function init() {
            // Carregar o modelo
            model = await tf.loadLayersModel(modelURL);

            // Configurar webcam
            const videoElement = document.createElement('video');
            videoElement.width = 500;
            videoElement.height = 500;
            document.getElementById('webcam-container').appendChild(videoElement);
            webcam = await tf.data.webcam(videoElement);

            // Inicializar área de previsão
            labelContainer = document.getElementById('label-container');
            labelContainer.appendChild(document.createElement("div"));
            loop();
        }

        async function loop() {
            const img = await webcam.capture();
            const prediction = model.predict(img.expandDims(0));
            const result = prediction.dataSync();

            labelContainer.childNodes[0].innerHTML = "Predição: " + result[0].toFixed(2);

            img.dispose();
            requestAnimationFrame(loop);
        }
    </script>
</body>
</html>
